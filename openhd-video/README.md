I think this module needs to be (re-written) just as mavlink telemetry, it is too complex in my opinion.

However, we probably can re-use a good amount of code.